const animals = ["Alligator","Alpaga","Anaconda","Antilope","Ara","Babouin","Belette","Bison","Blaireau","Boa","Bœuf","Bouquetin","Buffle","Busard","Buse","Cacatoes","Caille","Caiman","Campganol","Canard","Capucin","Capybara","Caribou","Castor","Cerf","Chacal","Chameau","Chamois","Chauve-souris","Chevre","Chien","Chimpanze","Chouette","Cigogne","Cobra","Colibri","Condor","Corbeau","Corneille","Couleuvre","Coyote","Crocodile","Cygne","Daim","Dauphin","Diable de Tasmanie","Dingo","Ecureuil","Elan","Elephan","Emeu","Epervier","Faisan","Saucon","Fauvette","Fennec","Flammand Rose","Fouine","Furet","Gazelle","Geai","Gibbon","Girafe","Glouton","Gnou","Goeland","Gorille","Grizzli","Grue","Guepard","Hamster","Herisson","Hermine","Heron","Hibou","Hippopotame","Hirondelle","Hupe","Hyene","Ibis","Jaguar","Kangourou","Kiwi","Koala","Lama","Lamantin","Lapin","Leopard","Lievre","Linotte","Lion","Loup","Loutre","Lycaon","Lynx","Macaque","Manchot","Mandrill","Mangouste","Marmotte","Martin Pecheur","Merle","Mesange","Moineau","Morse","Mulot","Musaraigne","Narval","Ocelot","Oie","Orang-Outan","Ornithorynque","Orque","Orvet","Otarie","Ouistiti","Ours","Palombe","Panda","Pangolin","Paon","Paresseux","Pelican","Perdrix","Perruche","Phacochere","Phoque","Pic vert","Pigeon","Pinguin","Pinson","Porc-epic","Puma","Putois","Python","Ragondin","Rat","Raton-laveur","Renard","Renne","Requin","Rhinoceros","Rossignol","Rouge-gorge","Sanglier","Suricate","Amanoir","Tapir","Taupe","Tigre","Tortue","Varan","Vautour","Vipere","Vison","Wombat","Yak","Zebre"];
const countries = ["Afghanistan","Afrique du Sud","Albanie","Algerie","Allemagne","Andorre","Angola","Anguilla","Antigua-et-Barbuda","Antilles Neerlandaises","Arabie Saoudite","Argentine","Armenie","Aruba","Australie","Autriche","Azerbaidjan","Bahamas","Bahrein","Bangladesh","Barbade","Belgique","Belize","Benin","Bermudes","Bhoutan","Bielorussie","Birmanie","Bolivie","Bosnie-Herzegovine","Botswana","Bresil","Brunei","Bulgarie","Burkina Faso","Burundi","Cambodge","Cameroun","Canada","Cap-vert","Chili","Chine","Chypre","Colombie","Comores","Coree du Nord","Coree du Sud","Costa Rica","Cote d'Ivoire","Croatie","Cuba","Danemark","Djibouti","Dominique","Egypte","Émirats Arabes Unis","Equateur","Erythree","Espagne","Estonie","Etats Federes de Micronesie","Etats-Unis","Ethiopie","Fidji","Finlande","France","Gabon","Gambie","Georgie","Ghana","Gibraltar","Grece","Grenade","Groenland","Guadeloupe","Guam","Guatemala","Guinee","Guinee Équatoriale","Guinee-Bissau","Guyana","Guyane Française","Haïti","Honduras","Hong-Kong","Hongrie","Inde","Indonesie","Iran","Iraq","Irlande","Islande","Israel","Italie","Jamaïque","Japon","Jordanie","Kazakhstan","Kenya","Kirghizistan","Kiribati","Koweit","Laos","Le Vatican","Lesotho","Lettonie","Liban","Liberia","Libye","Liechtenstein","Lituanie","Luxembourg","Macao","Madagascar","Malaisie","Malawi","Maldives","Mali","Malte","Maroc","Martinique","Maurice","Mauritanie","Mayotte","Mexique","Moldavie","Monaco","Mongolie","Montenegro","Montserrat","Mozambique","Namibie","Nauru","Nepal","Nicaragua","Niger","Nigeria","Niue","Norvege","Nouvelle-Caledonie","Nouvelle-Zelande","Oman","Ouganda","Ouzbekistan","Pakistan","Palaos","Panama","Papouasie-Nouvelle-Guinee","Paraguay","Pays-Bas","Perou","Philippines","Pologne","Polynesie Française","Porto Rico","Portugal","Qatar","Republique Centrafricaine","Republique de Macedoine","Republique Democratique du Congo","Republique Dominicaine","Republique du Congo","Republique Tcheque","Reunion","Roumanie","Royaume-Uni","Russie","Rwanda","Sainte-Helene","Sainte-Lucie","Saint-Kitts-et-Nevis","Saint-Marin","Saint-Pierre-et-Miquelon","Saint-Vincent-et-les Grenadines","Salvador","Samoa","Samoa Americaines","Sao Tome-et-Principe","Senegal","Serbie","Seychelles","Sierra Leone","Singapour","Slovaquie","Slovenie","Somalie","Soudan","Sri Lanka","Suede","Suisse","Suriname","Svalbard et Jan Mayen","Swaziland","Syrie","Tadjikistan","Taïwan","Tanzanie","Tchad","Terres Australes Françaises","Thaïlande","Timor Oriental","Togo","Tonga","Trinite-et-Tobago","Tunisie","Turkmenistan","Turquie","Tuvalu","Ukraine","Uruguay","Vanuatu","Venezuela","Viet Nam","Wallis et Futuna","Yemen","Zambie","Zimbabwe"];
const capitals = ["Abou Dabi","Abuja","Accra","Achgabat","Addis-Abeba","Alger","Alofi","Amman","Amsterdam","Andorre-la-Vieille","Ankara","Antananarivo","Apia","Asmara","Asuncion","Athènes","Avarua","Bagdad","Bakou","Bamako","Bandar Seri Begawan","Bangkok","Bangui","Banjul","Basseterre","Belgrade","Belmopan","Berlin","Berne","Beyrouth","Bichkek","Bissau","Bloemfontein","Bogota","Brasilia","Bratislava","Brazzaville","Bridgetown","Bruxelles","Bucarest","Budapest","Buenos Aires","Le Caire","Canberra","Le Cap","Caracas","Castries","Chisinau","Sri Jayawardenapura Kotte","Conakry","Copenhague","Dakar","Damas","Delap-Uliga-Darrit","Dacca","Dili","Djibouti","Djoubanote","Dodoma","Doha","Douchanbe","Dublin","Erevan","Freetown","Funafuti","Gaborone","Georgetown","Gitega","Guatemala","Hanoi","Harare","La Havane","Helsinki","Honiara","Islamabad","Jakarta","Jerusalem","Kaboul","Kampala","Katmandou","Khartoum","Kiev","Kigali","Kingston","Kingstown","Kinshasa","Melekeok","Koweït","Kuala Lumpur","Libreville","Lilongwe","Lima","Lisbonne","Ljubljana","Lomé","Londres","Luanda","Lusaka","Luxembourg","Madrid","Malabo","Male","Managua","Manama","Manille","Maputo","Mascate","Maseru","Mbabane","Mexico","Minsk","Mogadiscio","Monaco","Monrovia","Montevideo","Moroni","Moscou","Nairobi","Nassau","Naypyidaw","N'Djamena","New Delhi","Niamey","Nicosie","Nouakchott","Nour-Soultan","Nuku'alofa","Oslo","Ottawa","Ouagadougou","Oulan-Bator","Palikir","Panama","Paramaribo","Paris","La Paz","Pekin","Phnom Penh","Podgorica","Port Moresby","Port-au-Prince","Port-d'Espagne","Port-Louis","Porto-Novo","Port-Vila","Prague","Praia","Pretoria","Putrajaya","Pyongyang","Quito","Rabat","Ramallah","Reykjavik","Riga","Riyad","Rome","Roseau","Saint John's","Saint-Domingue","Saint-Georges","Saint-Marin","San José","San Salvador","Sanaa","Santiago","Sarajevo","Séoul","Singapour","Skopje","Sofia","Stockholm","Sucre","Suva","Tachkent","Tallinn","Tarawa-Sud","Tbilissi","Tegucigalpa","Téhéran","Thimphou","Tirana","Tokyo","Tripoli","Tunis","Vaduz","La Valette","Varsovie","Cite du Vatican","Victoria","Vienne","Vientiane","Vilnius","Washington D.C.","Wellington","Windhoek","Yamoussoukro","Yaoundé","Yaren","Zagreb"];
const vegetables = ["Artichaut","Abricot","Amande","Ananas","Asperge","Aubergine","Avocat","Baie de Goji","Banane","Bette","Betterave","Brocoli","Brocoli-rave","Brugnon","Cacahuete","Carambole","Carotte","Cassis","Celeri branche","Celeri rave","Cerise","Chataigne","Chou blanc","Chou de Bruxelle","Chou frise","Chou palmier","Chou romanesco","Chou rouge","Chou-chinois","Chou-fleur","Chou-rave","Citron","Citron vert","Citrouille","Clementine","Cœur de palmier","Coing","Concombre","Courge","Courgette","Cresson","Datte","Echalote","Endive","Epinard","Fenouil","Feve","Figue","Flageolet","Fraise","Framboise","Fruit de la passion","Goyave","Grenade","Groseille","Haricot beure","Haricot blanc","Haricot mungo","Haricot vert","Kaki","Kiwi","Kumquat","Laitue","Lentille","Litchi","Luzerne","Mache","Mandarine","Mangue","Melon","Menthe","Mirabelle","Mure","Myrte","Myrtille","Navet","Nectarine","Noisette","Noix","Noix de cajou","Noix de coco","Noix de pecan","Olive","Orange","Orange sanguine","Oseille","Pamplemousse","Panais","Papaye","Pasteque","Patate","Peche","Persil","Petit pois","Pistache","Poire","Poireau","Poireau","Pois mangetout","Poivron","Pomme","Pomme de terre","Potimarron","Potiron","Prune","Radis","Raisin","Reine-claude","Rhubarbe","Salsifis","Tomate","Topinambour"];

const letters = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];

const randomWordList = [animals,vegetables,countries,capitals];
const randomWordListTitle = ['Animaux','Fruits é Légumes','Pays','Capitales'];

let randomWord = '', score = '', timeout, interval;
let error = 0;
let tempArray = [];

document.addEventListener('keydown', (event) => {keyboard(event.key);});

loadingFunction();

function loadingFunction() {
	randomWordFunction();
}


function randomWordFunction(p) {
	let x = document.querySelector('#pendu_img');
	let y = document.querySelector('#prop').getElementsByTagName('button');
	let z = document.querySelector('#indice');
	let a = document.querySelector('#mysteryword').getElementsByTagName('input');
	let b = document.querySelector('#list').getElementsByTagName('button');
	let c = document.querySelector('#timer');
	
	// REMOVE
	for (let i = 0; i < y.length; i++) {
		y[i].classList.remove('used');
		y[i].removeAttribute('disabled');
	}
	
	z.innerHTML = '';
	
	for (let i = 0; i < a.length; i) {
		a[i].remove();
	}
	
	error = 0;
	score = '';
	clearTimeout(timeout);
	clearInterval(interval);
	c.innerHTML = '';
	
	// INITIALIZE	
	let index = '';
	if (typeof p == 'undefined') {
		index = Math.floor(Math.random() * randomWordList.length)
		temp = randomWordList[index];
	} else {
		index = p;
		temp = randomWordList[index];
	}
	for (let i = 0; i < b.length; i++) {
		if (i == index) {
			b[i].classList.add('active');
		} else {
			b[i].classList.remove('active');
		}
	}
	randomWord = temp[Math.floor(Math.random() * temp.length)];
	console.log(randomWord);
	
	for (let i = 0; i < letters.length; i++) {
		tempArray[i] = letters[i];
	}
	
	
	x.src = 'imgs/pendu_0.png';
	
	let anchor = document.querySelector('#mysteryword');
	
	for (let i = 0; i < randomWord.length; i++) {
		let input = document.createElement('input');
		input.type= 'text';
		input.setAttribute('readonly','readonly');
		if (randomWord[i] == ' ' || randomWord[i] == '-') {
			input.className = 'space';
		}
		input.value = ' ';
		anchor.append(input);
		score = randomWord.length;
	}
}

function game(p) {
	let x = document.querySelector('#btn_' + p);
	let x2 = document.querySelector('#prop').getElementsByTagName('button');
	let y = document.querySelector('#pendu_img');
	let z = document.querySelector('#mysteryword').getElementsByTagName('input');
	let a = document.querySelector('#indice');
	let b = document.querySelector('#timer');
	
	x.classList.add('used');
	x.setAttribute('disabled','true');
	
	if (randomWord.toLowerCase().indexOf(p.toLowerCase()) >= 0) {
		// button
		x.classList.add('used');
		x.setAttribute('disabled','true');
		
		// bottom word
		for (let i = 0; i < randomWord.length; i++) {
			if (p.toLowerCase() == randomWord[i].toLowerCase()) {
				z[i].classList.add('validate');
				z[i].value = randomWord[i].toUpperCase();
				score--;
			}
		}
	} else {
		error++;
		y.src = 'imgs/pendu_' + error + '.png';
	}
	if (error == 9) { // -------------------------------------------- PERDRE
		a.innerHTML = 'Vous avez perdu !';
		for (let i = 0; i < 26; i++) {
			x2[i].classList.add('used');
			x2[i].setAttribute('disabled','true');
		}
		
		for (let i = 0; i < randomWord.length; i++) {
			if (!z[i].classList.contains('validate')) {
				z[i].classList.add('invalidate');
				z[i].value = randomWord[i].toUpperCase();
			}
		}
		
		timeout = setTimeout(loadingFunction,3000);
		interval = setTimeout(function(){b.innerHTML = 'Nouvelle partie aléatoire dans <b>3</b> secondes'},0);
		interval = setTimeout(function(){b.innerHTML = 'Nouvelle partie aléatoire dans <b>2</b> secondes'},1000);
		interval = setTimeout(function(){b.innerHTML = 'Nouvelle partie aléatoire dans <b>1</b> secondes'},2000);

		
	} if (score == 0) { // -------------------------------------------- GAGNER
		a.innerHTML = 'Félicitations ! Vous avez gagné !';
		for (let i = 0; i < 26; i++) {
			x2[i].classList.add('used');
			x2[i].setAttribute('disabled','true');
		}
		timeout = setTimeout(loadingFunction,3000);
		interval = setTimeout(function(){b.innerHTML = 'Nouvelle partie aléatoire dans <b>3</b> secondes'},0);
		interval = setTimeout(function(){b.innerHTML = 'Nouvelle partie aléatoire dans <b>2</b> secondes'},1000);
		interval = setTimeout(function(){b.innerHTML = 'Nouvelle partie aléatoire dans <b>1</b> secondes'},2000);
	}
}

function keyboard(p) {
	if (error < 10 && tempArray.indexOf(p) >= 0) {
		tempArray.splice(tempArray.indexOf(p),1);
		game(p);
	}
}